(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(23),c=n.n(a),u=(n(28),n(29),n(4)),s=n(0),i=Object(r.forwardRef)((function(e,t){var n=e.children,o=e.buttonLabel,a=void 0===o?"default value ok sucio":o,c=Object(r.useState)(!1),i=Object(u.a)(c,2),l=i[0],p=i[1],d=function(){p(!l)};return Object(r.useImperativeHandle)(t,(function(){return{toggleVisibility:d}})),Object(s.jsx)("div",{children:l?Object(s.jsxs)("div",{children:[n,Object(s.jsx)("button",{onClick:d,children:"cancel"})]}):Object(s.jsx)("div",{children:Object(s.jsx)("button",{onClick:d,children:a})})})})),l=function(e){var t=e.handleLogout,n=e.addNote,o=Object(r.useState)(""),a=Object(u.a)(o,2),c=a[0],l=a[1],p=Object(r.useRef)();return Object(s.jsxs)(i,{ref:p,buttonLabel:"show create note",children:[Object(s.jsx)("h3",{children:"Create note"}),Object(s.jsxs)("form",{onSubmit:function(e){(e.preventDefault(),""!==c)&&(n({content:c,important:!1}),p.current.toggleVisibility(),l(""))},children:[Object(s.jsx)("input",{placeholder:"write a new note",type:"text",onChange:function(e){""!==e.target.value?l(e.target.value):l("")},value:c,name:"content",required:!0}),Object(s.jsx)("button",{children:"save"})]}),Object(s.jsx)("button",{onClick:t,children:"Cerrar sesion"})]})},p=function(e){var t=e.notes,n=e.handleImportant,o=Object(r.useState)(t.important),a=Object(u.a)(o,2),c=a[0],i=a[1];return Object(s.jsx)("li",{children:Object(s.jsxs)("div",{children:[t.content,Object(s.jsx)("button",{onClick:function(){i(!c);var e={content:t.content,important:!c,id:t.id};console.log(e),n(e)},children:c?"make not important":"make important"})]})})},d=n(13),j=n(3),b=n.n(j),h=n(5),f=n(11),O=n(12),v=n(6),g=n.n(v),m={BASE_NOTES_URL:"/api/notes",BASE_USERS_URL:"/api/users",BASE_LOGIN_URL:"/api/login"},w=m.BASE_NOTES_URL,x=null,S=function(e){x="Bearer ".concat(e)},k=function(){var e=Object(h.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get(w);case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r,o,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:x}},r=t.content,o=t.important,e.next=5,g.a.post(w,{content:r,important:o},n);case 5:return a=e.sent,c=a.data,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{Authorization:x}},console.log(t),e.next=5,g.a.put("".concat(w,"/").concat(t.id),t,n);case 5:r=e.sent,console.log(r),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),N=m.BASE_LOGIN_URL,y=function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r,o,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.next=3,g.a.post(N,{username:n,password:r});case 3:return o=e.sent,a=o.data,console.log(a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E={username:"",password:""},C="loggedNoteAppUser",I=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],a=Object(r.useState)(!0),c=Object(u.a)(a,2),s=c[0],i=c[1],l=Object(r.useState)(!0),p=Object(u.a)(l,2),j=p[0],v=p[1],g=Object(r.useState)(E),m=Object(u.a)(g,2),w=m[0],x=m[1],N=Object(r.useState)(null),I=Object(u.a)(N,2),_=I[0],R=I[1];Object(r.useEffect)((function(){v(!0),k().then((function(e){o((function(t){return t.concat(e)})),v(!1)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem(C);if(e){var t=JSON.parse(e);R(t),S(t.token)}}),[]);var B=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,y({username:w.username,password:w.password});case 4:n=e.sent,window.localStorage.setItem(C,JSON.stringify(n)),R(n),S(n.token),x({username:"",password:""}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return{loading:j,notes:n,showAll:s,login:w,userlg:_,addNote:function(e){L(e).then((function(e){console.log(e),o((function(t){return[].concat(Object(d.a)(t),[e])}))})).catch((function(e){return console.log(e)}))},handleShowAll:function(){i(!s);var e=Object(d.a)(n);if(s){var t=e.filter((function(e){return!1===e.important}));console.log(e),o(t)}else{var r=Object(d.a)(n);console.log(r),k().then((function(e){o(e)}))}},onLogin:B,inputValue:function(e){var t=Object(O.a)({},w);x(Object(O.a)(Object(O.a)({},t),{},Object(f.a)({},e.currentTarget.name,e.currentTarget.value)))},handleLogout:function(){R(null),S(_.token),window.localStorage.removeItem(C)},handleImportant:function(e){var t=e.content,n=e.important,r=e.id;console.log(n,"useNotes");var o={content:t,important:n,id:r};console.log(e),A(o).then((function(e){return e}))}}},_=function(e){var t=e.handleShowAll,n=e.showAll;return Object(s.jsx)("button",{onClick:t,children:n?"Show only important":"Show all"})};var R=function(e){var t=e.inputValue,n=e.login,r=e.onLogin;return Object(s.jsx)(i,{buttonLabel:"show login",children:Object(s.jsxs)("form",{onSubmit:r,children:[Object(s.jsx)("input",{type:"text",value:n.username,placeholder:"username",onChange:t,name:"username",required:!0}),Object(s.jsx)("input",{type:"password",value:n.password,placeholder:"password",onChange:t,name:"password",required:!0}),Object(s.jsx)("button",{children:"login"})]})})},B=function(){var e=I(),t=e.loading,n=e.notes,r=e.addNote,o=e.showAll,a=e.handleShowAll,c=e.onLogin,u=e.inputValue,i=e.login,d=e.userlg,j=e.handleLogout,b=e.handleImportant;return Object(s.jsxs)("div",{className:"App",children:[d?Object(s.jsx)(l,{addNote:r,handleLogout:j}):Object(s.jsx)(R,{onLogin:c,inputValue:u,login:i}),Object(s.jsx)("h1",{children:"NOTES"}),t?"Cargando...":"",Object(s.jsx)(_,{handleShowAll:a,showAll:o}),Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsx)(p,{notes:e,handleImportant:b},e.id)}))})]})};c.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(B,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.ed895e29.chunk.js.map